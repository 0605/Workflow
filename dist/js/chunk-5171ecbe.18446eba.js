(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5171ecbe"],{"375f":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAAHCAYAAADEUlfTAAAAAXNSR0IArs4c6QAAAJlJREFUCB01jj0KwlAQhGc3hXeyFPw5gXgKDQSjIK8QjeirHp7ATnIDUbGz9gbexLe+CckWW8w3O7Oy3IePCEq/yR9oZ1WFcTR4JYChLqswJCMwwzUzLYRCA5LBgJCEXE2nRzd/ZoTv1+3bH0x6MNtC5ODd4kJduRjFiwRcqijWu/OIunQdXRTBD7FWxUybr9oOulPXncCinf6xkkQ/lcJHVAAAAABJRU5ErkJggg=="},5836:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAANCAYAAAB2HjRBAAAAAXNSR0IArs4c6QAAAItJREFUKBVjXP/8j+f/v/9nMTD8l2FABoyMfxkZGA78Y2OJDRZlfI4sBWMzrnvy+zGGRpgsmGZ8AjRkAgMT40u4MOO/W4GSbKeAmn/9hwuSwmBirGQiRT2K2n//k8jXzMDIRYFmBoZRzShxQZgDDDDGX4SVYVPx/ycLUHMaI8N/F2zSeMT+MzEyrQEA924i2eq7BTEAAAAASUVORK5CYII="},"603e":function(e,t){e.exports="data:image/png;base64,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"},"677b":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAAAXNSR0IArs4c6QAAAd9JREFUKBV1Uj1oU1EUPue+1wRLWoqDULvVTgri2iolts7pGB0c6s+QLSg8XmOHTI/wiB3NYEshTl3NVkpRJJCxVCwIEVy6OIhoUJJ37zuec19ucKgXDvfc7+eecy4XAQA57KrX6zPDxDwHSksML2Uo9QHV2/yU95L5X2MpKJfUarW14UifAtC8QagYPbpqg3PBhBON00s1FIAA3yDQwyiKjh357x6G2+uoqO00yOVn5TaE9PH/TO6CrIDay+f8m8rOhHA4NuHW1nY3CGpFFrtuioLJ2WpYKx6fUtrQYHiO7JGMSV94Ph6wucwY8AgHjNlcNElq9qdQvVKIcG04GHwSkaw4jt7zHGUxSxhNZcEyFiDT4tLkVceEbU9rJ5vsFp+cOGEj9fOFwg3OhQRucdVVkmrjtleF44WZlvqKZ+j4qB5lON+kMEpG5j6390HC6OSBYI4XrXiwWq3OXZounFCqnzQajXdOcNEehmERlb/75/fgltfr9ZI7t1c+ovLaK8vLJ91u9+tFpiAI7irPb1NqNpvN5meZyxMhE2uen3udEh0N9Wj/2/n5meBXFhau5/3cJj//Pf6CT+M4tj/LGe3DVCqVmdm5y8/4UELERTES0RcC6Pz88X2n1Wq5T05/AeJ73lRH5FXnAAAAAElFTkSuQmCC"},"7a89":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACIAAAAiCAYAAAA6RwvCAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAAsSAAALEgHS3X78AAAEBUlEQVRYw72YT2wbRRTGfztrb9rYIVH+OBEJkJQecIFErSKcCtqkICRCKg5EFRBZQqqEELLICXrgEATc2hMUS8CBA7ICEiqX0hgJgUjSQzeqqJLSOoeGNEVWm8SJmjqOqBt7OXidrp21PUv/fNJod968/ebbNzNvdlbBAQLBsA94FegFngHagUfM5lvAVeAvYBz4RY+EbshyK5ICDgDHgFcAlyR3BogCx/VIaPKehASC4V3AF8CAk8jZ4AwwrEdCfzsWEgiG3wK+4m7o7xW3gPf0SGjUrlEtIWIE+BKouk8iMLkG2zoHjPjM2HhFIYFg+CPgs/sooBiH2joHNuMzYwXzpmBozOEYdUT7/zGkR0LfbxMSCIY7gGmg5iEJSQJdeiQ0DyAsDScfogjMvk4WRCQQDL8AVFzrDwgH9UhoMp+cjjl5UhUKXXta8O9upLG+GoDE6gaxKwmmL98gkzWc0H0ATCpm2o4jmTG9Ho3X+/34Gjy27UsrKX6KxlhPpWWFbAKtgtzeISVCFUpZEQC+Bg+D/X5UVchQYvbdL8htYFLo2tNSVkQeTQ0euvzNsrQAfYLcLioF/+5GaWYnvsDTgtxWLgVfk1ea2ddYOXIWdAgeUO7IOls5NQLJbxKApeV1aebE6oYj4YJcqpVC7EpCmtiJL5AUwLys93RskeWVVEW/5ZUNpmOLToTMC+CSrHcmk+VUNMZSGTFLKylORS+TyWSdCLkkgD+cPCEUhbNT15idS5BMpclmDbJZg2QqzexcgrNT1xCK9LTLY1w6xfsaPHQ8VofXo23Z8utCKboHWE+lmf/nZtnomdgEWvO772ngsJ1Xlaby7FPNW5ub9WUNI1c3yqzUxOoGF2cXuZ3OlHI5rUdCr+WjcNxOSG3NDnr2tVKlyZ4gtuPR5hrq63aiX4izlvzXzuWENZIEguGfsRwbamuq6O1pR3OrtkNgNySGhbA4SHfuZBg/d5W15G2r+YweCR2Gwi+09zFziqap9O1vx1Ptxu0WaG6B2yUK7y11zS1wucw2d6E9XzzVbvr2t6NpW9/rSWA4X9myxmfGbrZ1DiwAg893P05LkxdViLtFLbo368JiE9a6TdlR5cLr0ViIrwEc1SOhiW1CTDEXu196IxvY23ZICAVrUdXCutWWv7pUez9rqa/byfWl9ZHfvnknbO3bdsF/Gz03AnxilHCwmxelfG3w8dH+nk+LjSWf/e7XqSHgawO8pSaglcBuohbV14F33375OdtzU9mXGP39/JMGfE6ZQ3jxSiphH1NgeOjF7rlyPBXxw/ifBxX4EOjHnFelhsdCnDVgDDjxZu++iUp9ONoUfpy84DOjk/9R8wRQazavAQvkftRMANEjB/Zel+X+D66hKxwLm6GMAAAAAElFTkSuQmCC"},b3e8:function(e,t,o){"use strict";o.r(t);var i=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("div",{staticClass:"fd-nav"},[o("div",{staticClass:"fd-nav-left"},[o("div",{staticClass:"fd-nav-back",on:{click:e.toReturn}},[o("i",{staticClass:"anticon anticon-left"})]),o("div",{staticClass:"fd-nav-title"},[e._v(e._s(e.workFlowDef.name))])]),o("div",{staticClass:"fd-nav-right"},[o("button",{staticClass:"ant-btn button-publish",attrs:{type:"button"},on:{click:e.saveSet}},[o("span",[e._v("发 布")])])])]),o("div",{staticClass:"fd-nav-content"},[o("section",{staticClass:"dingflow-design"},[o("div",{staticClass:"zoom"},[o("div",{class:"zoom-out"+(50==e.nowVal?" disabled":""),on:{click:function(t){return e.zoomSize(1)}}}),o("span",[e._v(e._s(e.nowVal)+"%")]),o("div",{class:"zoom-in"+(300==e.nowVal?" disabled":""),on:{click:function(t){return e.zoomSize(2)}}})]),o("div",{staticClass:"box-scale",style:"transform: scale("+e.nowVal/100+"); transform-origin: 50% 0px 0px;",attrs:{id:"box-scale"}},[o("nodeWrap",{attrs:{nodeConfig:e.nodeConfig,flowPermission:e.flowPermission,isTried:e.isTried,tableId:e.tableId},on:{"update:nodeConfig":function(t){e.nodeConfig=t},"update:node-config":function(t){e.nodeConfig=t},"update:flowPermission":function(t){e.flowPermission=t},"update:flow-permission":function(t){e.flowPermission=t},"update:isTried":function(t){e.isTried=t},"update:is-tried":function(t){e.isTried=t}}}),e._m(0)],1)])]),o("el-dialog",{attrs:{title:"提示",visible:e.tipVisible},on:{"update:visible":function(t){e.tipVisible=t}}},[o("div",{staticClass:"ant-confirm-body"},[o("i",{staticClass:"anticon anticon-close-circle",staticStyle:{color:"#f00"}}),o("span",{staticClass:"ant-confirm-title"},[e._v("当前无法发布")]),o("div",{staticClass:"ant-confirm-content"},[o("div",[o("p",{staticClass:"error-modal-desc"},[e._v("以下内容不完善，需进行修改")]),o("div",{staticClass:"error-modal-list"},e._l(e.tipList,(function(t,i){return o("div",{key:i,staticClass:"error-modal-item"},[o("div",{staticClass:"error-modal-item-label"},[e._v("流程设计")]),o("div",{staticClass:"error-modal-item-content"},[e._v(e._s(t.name)+" 未选择"+e._s(t.type))])])})),0)])])]),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(t){e.tipVisible=!1}}},[e._v("我知道了")]),o("el-button",{attrs:{type:"primary"},on:{click:function(t){e.tipVisible=!1}}},[e._v("前往修改")])],1)]),o("promoterDrawer"),o("approverDrawer",{attrs:{directorMaxLevel:e.directorMaxLevel}}),o("copyerDrawer"),o("conditionDrawer")],1)},n=[function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"end-node"},[o("div",{staticClass:"end-node-circle"}),o("div",{staticClass:"end-node-text"},[e._v("流程结束")])])}],s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-drawer",{staticClass:"set_promoter",attrs:{"append-to-body":!0,title:"发起人",visible:e.$store.state.promoterDrawer,direction:"rtl",size:"550px","before-close":e.savePromoter},on:{"update:visible":function(t){return e.$set(e.$store.state,"promoterDrawer",t)}}},[i("div",{staticClass:"demo-drawer__content"},[i("div",{staticClass:"promoter_content drawer_content"},[i("p",[e._v(e._s(e.$func.arrToStr(e.flowPermission)?e.$func.arrToStr(e.flowPermission):"所有人"))]),i("el-button",{attrs:{type:"primary"},on:{click:e.addPromoter}},[e._v("添加/修改发起人")])],1),i("div",{staticClass:"demo-drawer__footer clear"},[i("el-button",{attrs:{type:"primary"},on:{click:e.savePromoter}},[e._v("确 定")]),i("el-button",{on:{click:e.closeDrawer}},[e._v("取 消")])],1),i("el-dialog",{staticClass:"promoter_person",attrs:{title:"选择成员",visible:e.promoterVisible,width:"600px","append-to-body":""},on:{"update:visible":function(t){e.promoterVisible=t}}},[i("div",{staticClass:"person_body clear"},[i("div",{staticClass:"person_tree l"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.promoterSearchName,expression:"promoterSearchName"}],attrs:{type:"text",placeholder:"搜索成员"},domProps:{value:e.promoterSearchName},on:{input:[function(t){t.target.composing||(e.promoterSearchName=t.target.value)},function(t){return e.getDebounceData(t)}]}}),e.promoterSearchName?e._e():i("p",{staticClass:"ellipsis tree_nav"},[i("span",{staticClass:"ellipsis",on:{click:function(t){return e.getDepartmentList(0)}}},[e._v("天下")]),e._l(e.departments.titleDepartments,(function(t,o){return i("span",{key:o+"a",staticClass:"ellipsis",on:{click:function(o){return e.getDepartmentList(t.id)}}},[e._v(e._s(t.departmentName))])}))],2),i("ul",[e._l(e.departments.childDepartments,(function(t,n){return i("li",{key:n+"b",staticClass:"check_box"},[i("a",{class:e.$func.toggleClass(e.checkedDepartmentList,t)&&"active",on:{click:function(o){return e.$func.toChecked(e.checkedDepartmentList,t)}}},[i("img",{attrs:{src:o("5836")}}),e._v(e._s(t.departmentName))]),i("i",{on:{click:function(o){return e.getDepartmentList(t.id)}}},[e._v("下级")])])})),e._l(e.departments.employees,(function(t,n){return i("li",{key:n+"c",staticClass:"check_box"},[i("a",{class:e.$func.toggleClass(e.checkedEmployessList,t)&&"active",attrs:{title:t.departmentNames},on:{click:function(o){return e.$func.toChecked(e.checkedEmployessList,t)}}},[i("img",{attrs:{src:o("7a89")}}),e._v(e._s(t.employeeName))])])}))],2)]),i("div",{staticClass:"has_selected l"},[i("p",{staticClass:"clear"},[e._v("已选（"+e._s(e.checkedDepartmentList.length+e.checkedEmployessList.length)+"）\n                        "),i("a",{on:{click:function(t){e.checkedDepartmentList=[],e.checkedEmployessList=[]}}},[e._v("清空")])]),i("ul",[e._l(e.checkedDepartmentList,(function(t,n){return i("li",{key:n+"d"},[i("img",{attrs:{src:o("5836")}}),i("span",[e._v(e._s(t.departmentName))]),i("img",{attrs:{src:o("677b")},on:{click:function(o){return e.$func.removeEle(e.checkedDepartmentList,t)}}})])})),e._l(e.checkedEmployessList,(function(t,n){return i("li",{key:n+"e"},[i("img",{attrs:{src:o("7a89")}}),i("span",[e._v(e._s(t.employeeName))]),i("img",{attrs:{src:o("677b")},on:{click:function(o){return e.$func.removeEle(e.checkedEmployessList,t)}}})])}))],2)])]),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.promoterVisible=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:e.surePromoter}},[e._v("确 定")])],1)])],1)])},r=[],a=(o("7f7f"),{data:function(){return{activeName:"1",departments:{},roles:[]}},methods:{handleClick:function(){this.copyerSearchName="",this.conditionRoleSearchName="",1==this.activeName?this.getDepartmentList():this.getRoleList()},getRoleList:function(){var e=this;this.$axios.get("".concat("/Workflow/","roles.json")).then((function(t){e.roles=t.data.list}))},getDepartmentList:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.$axios.get("".concat("/Workflow/","departments.json?parentId=").concat(t)).then((function(t){e.departments=t.data}))},getDebounceData:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.$func.debounce(function(){var o=this;e.target.value?1==t?(this.departments.childDepartments=[],this.$axios.get("".concat("/Workflow/","employees.json?searchName=").concat(e.target.value,"&pageNum=1&pageSize=30")).then((function(e){o.departments.employees=e.data.list}))):this.$axios.get("".concat("/Workflow/","roles.json?searchName=").concat(e.target.value,"&pageNum=1&pageSize=30")).then((function(e){o.roles=e.data.list})):1==t?this.getDepartmentList():this.getRoleList()}.bind(this))()}}}),c={mixins:[a],data:function(){return{flowPermission:[],promoterVisible:!1,promoterSearchName:"",checkedDepartmentList:[],checkedEmployessList:[]}},computed:{flowPermission1:function(){return this.$store.state.flowPermission.value}},watch:{flowPermission1:function(e){this.flowPermission=e}},methods:{addPromoter:function(){this.promoterVisible=!0,this.getDepartmentList(),this.promoterSearchName="",this.checkedEmployessList=[],this.checkedDepartmentList=[];for(var e=0;e<this.flowPermission.length;e++){var t=this.flowPermission[e],o=t.type,i=t.name,n=t.targetId;1==o?this.checkedEmployessList.push({employeeName:i,id:n}):3==o&&this.checkedDepartmentList.push({departmentName:i,id:n})}},surePromoter:function(){var e=this;this.flowPermission=[],this.checkedDepartmentList.map((function(t){e.flowPermission.push({type:3,targetId:t.id,name:t.departmentName})})),this.checkedEmployessList.map((function(t){e.flowPermission.push({type:1,targetId:t.id,name:t.employeeName})})),this.promoterVisible=!1},savePromoter:function(){this.$store.commit("updateFlowPermission",{value:this.flowPermission,flag:!0,id:this.$store.state.flowPermission.id}),this.closeDrawer()},closeDrawer:function(){this.$store.commit("updatePromoter",!1)}}},l=c,p=o("2877"),d=Object(p["a"])(l,s,r,!1,null,null,null),u=d.exports,m=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-drawer",{staticClass:"set_promoter",attrs:{"append-to-body":!0,title:"审批人设置",visible:e.$store.state.approverDrawer,direction:"rtl",size:"550px","before-close":e.saveApprover},on:{"update:visible":function(t){return e.$set(e.$store.state,"approverDrawer",t)}}},[i("div",{staticClass:"demo-drawer__content"},[i("div",{staticClass:"drawer_content"},[i("div",{staticClass:"approver_content"},[i("el-radio-group",{staticClass:"clear",on:{change:e.changeType},model:{value:e.approverConfig.settype,callback:function(t){e.$set(e.approverConfig,"settype",t)},expression:"approverConfig.settype"}},[i("el-radio",{attrs:{label:1}},[e._v("指定成员")]),i("el-radio",{attrs:{label:2}},[e._v("主管")]),i("el-radio",{attrs:{label:4}},[e._v("发起人自选")]),i("el-radio",{attrs:{label:5}},[e._v("发起人自己")]),i("el-radio",{attrs:{label:7}},[e._v("连续多级主管")])],1),1==e.approverConfig.settype?i("el-button",{attrs:{type:"primary"},on:{click:e.addApprover}},[e._v("添加/修改成员")]):e._e(),1==e.approverConfig.settype?i("p",{staticClass:"selected_list"},[e._l(e.approverConfig.nodeUserList,(function(t,n){return i("span",{key:n},[e._v(e._s(t.name)+"\n                        "),i("img",{attrs:{src:o("375f")},on:{click:function(o){return e.$func.removeEle(e.approverConfig.nodeUserList,t,"targetId")}}})])})),0!=e.approverConfig.nodeUserList.length?i("a",{on:{click:function(t){e.approverConfig.nodeUserList=[]}}},[e._v("清除")]):e._e()],2):e._e()],1),2==e.approverConfig.settype?i("div",{staticClass:"approver_manager"},[i("p",[i("span",[e._v("发起人的：")]),i("select",{directives:[{name:"model",rawName:"v-model",value:e.approverConfig.directorLevel,expression:"approverConfig.directorLevel"}],on:{change:function(t){var o=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.approverConfig,"directorLevel",t.target.multiple?o:o[0])}}},e._l(e.directorMaxLevel,(function(t){return i("option",{key:t,domProps:{value:t}},[e._v(e._s(1==t?"直接":"第"+t+"级")+"主管")])})),0)]),i("p",{staticClass:"tip"},[e._v("找不到主管时，由上级主管代审批")])]):e._e(),5==e.approverConfig.settype?i("div",{staticClass:"approver_self"},[i("p",[e._v("该审批节点设置“发起人自己”后，审批人默认为发起人")])]):e._e(),i("div",{directives:[{name:"show",rawName:"v-show",value:4==e.approverConfig.settype,expression:"approverConfig.settype==4"}],staticClass:"approver_self_select"},[i("el-radio-group",{staticStyle:{width:"100%"},model:{value:e.approverConfig.selectMode,callback:function(t){e.$set(e.approverConfig,"selectMode",t)},expression:"approverConfig.selectMode"}},[i("el-radio",{attrs:{label:1}},[e._v("选一个人")]),i("el-radio",{attrs:{label:2}},[e._v("选多个人")])],1),i("h3",[e._v("选择范围")]),i("el-radio-group",{staticStyle:{width:"100%"},on:{change:e.changeRange},model:{value:e.approverConfig.selectRange,callback:function(t){e.$set(e.approverConfig,"selectRange",t)},expression:"approverConfig.selectRange"}},[i("el-radio",{attrs:{label:1}},[e._v("全公司")]),i("el-radio",{attrs:{label:2}},[e._v("指定成员")]),i("el-radio",{attrs:{label:3}},[e._v("指定角色")])],1),2==e.approverConfig.selectRange?i("el-button",{attrs:{type:"primary"},on:{click:e.addApprover}},[e._v("添加/修改成员")]):e._e(),3==e.approverConfig.selectRange?i("el-button",{attrs:{type:"primary"},on:{click:e.addRoleApprover}},[e._v("添加/修改角色")]):e._e(),2==e.approverConfig.selectRange||3==e.approverConfig.selectRange?i("p",{staticClass:"selected_list"},[e._l(e.approverConfig.nodeUserList,(function(t,n){return i("span",{key:n},[e._v(e._s(t.name)+"\n                        "),i("img",{attrs:{src:o("375f")},on:{click:function(o){return e.$func.removeEle(e.approverConfig.nodeUserList,t,"targetId")}}})])})),0!=e.approverConfig.nodeUserList.length&&1!=e.approverConfig.selectRange?i("a",{on:{click:function(t){e.approverConfig.nodeUserList=[]}}},[e._v("清除")]):e._e()],2):e._e()],1),7==e.approverConfig.settype?i("div",{staticClass:"approver_manager"},[i("p",[e._v("审批终点")]),i("p",{staticStyle:{"padding-bottom":"20px"}},[i("span",[e._v("发起人的：")]),i("select",{directives:[{name:"model",rawName:"v-model",value:e.approverConfig.examineEndDirectorLevel,expression:"approverConfig.examineEndDirectorLevel"}],on:{change:function(t){var o=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.approverConfig,"examineEndDirectorLevel",t.target.multiple?o:o[0])}}},e._l(e.directorMaxLevel,(function(t){return i("option",{key:t,domProps:{value:t}},[e._v(e._s(1==t?"最高":"第"+t)+"层级主管")])})),0)])]):e._e(),1==e.approverConfig.settype&&e.approverConfig.nodeUserList.length>1||2==e.approverConfig.settype||4==e.approverConfig.settype&&2==e.approverConfig.selectMode?i("div",{staticClass:"approver_some"},[i("p",[e._v("多人审批时采用的审批方式")]),i("el-radio-group",{staticClass:"clear",model:{value:e.approverConfig.examineMode,callback:function(t){e.$set(e.approverConfig,"examineMode",t)},expression:"approverConfig.examineMode"}},[i("el-radio",{attrs:{label:1}},[e._v("依次审批")]),i("br"),2!=e.approverConfig.settype?i("el-radio",{attrs:{label:2}},[e._v("会签(须所有审批人同意)")]):e._e()],1)],1):e._e(),2==e.approverConfig.settype||7==e.approverConfig.settype?i("div",{staticClass:"approver_some"},[i("p",[e._v("审批人为空时")]),i("el-radio-group",{staticClass:"clear",model:{value:e.approverConfig.noHanderAction,callback:function(t){e.$set(e.approverConfig,"noHanderAction",t)},expression:"approverConfig.noHanderAction"}},[i("el-radio",{attrs:{label:1}},[e._v("自动审批通过/不允许发起")]),i("br"),i("el-radio",{attrs:{label:2}},[e._v("转交给审核管理员")])],1)],1):e._e()]),i("div",{staticClass:"demo-drawer__footer clear"},[i("el-button",{attrs:{type:"primary"},on:{click:e.saveApprover}},[e._v("确 定")]),i("el-button",{on:{click:e.closeDrawer}},[e._v("取 消")])],1),i("el-dialog",{staticClass:"promoter_person",attrs:{title:"选择成员",visible:e.approverVisible,width:"600px","append-to-body":""},on:{"update:visible":function(t){e.approverVisible=t}}},[i("div",{staticClass:"person_body clear"},[i("div",{staticClass:"person_tree l"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.approverSearchName,expression:"approverSearchName"}],attrs:{type:"text",placeholder:"搜索成员"},domProps:{value:e.approverSearchName},on:{input:[function(t){t.target.composing||(e.approverSearchName=t.target.value)},function(t){return e.getDebounceData(t)}]}}),e.approverSearchName?e._e():i("p",{staticClass:"ellipsis tree_nav"},[i("span",{staticClass:"ellipsis",on:{click:function(t){return e.getDepartmentList(0)}}},[e._v("天下")]),e._l(e.departments.titleDepartments,(function(t,o){return i("span",{key:o+"a",staticClass:"ellipsis",on:{click:function(o){return e.getDepartmentList(t.id)}}},[e._v(e._s(t.departmentName))])}))],2),i("ul",[e._l(e.departments.childDepartments,(function(t,n){return i("li",{key:n+"b",staticClass:"check_box not"},[i("a",[i("img",{attrs:{src:o("5836")}}),e._v(e._s(t.departmentName))]),i("i",{on:{click:function(o){return e.getDepartmentList(t.id)}}},[e._v("下级")])])})),e._l(e.departments.employees,(function(t,n){return i("li",{key:n+"c",staticClass:"check_box"},[i("a",{class:e.$func.toggleClass(e.approverEmplyessList,t)&&"active",attrs:{title:t.departmentNames},on:{click:function(o){return e.$func.toChecked(e.approverEmplyessList,t)}}},[i("img",{attrs:{src:o("7a89")}}),e._v(e._s(t.employeeName))])])}))],2)]),i("div",{staticClass:"has_selected l"},[i("p",{staticClass:"clear"},[e._v("已选（"+e._s(e.approverEmplyessList.length)+"）\n                        "),i("a",{on:{click:function(t){e.approverEmplyessList=[]}}},[e._v("清空")])]),i("ul",e._l(e.approverEmplyessList,(function(t,n){return i("li",{key:n+"e"},[i("img",{attrs:{src:o("7a89")}}),i("span",[e._v(e._s(t.employeeName))]),i("img",{attrs:{src:o("677b")},on:{click:function(o){return e.$func.removeEle(e.approverEmplyessList,t)}}})])})),0)])]),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.approverVisible=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:e.sureApprover}},[e._v("确 定")])],1)]),i("el-dialog",{staticClass:"promoter_person",attrs:{title:"选择角色",visible:e.approverRoleVisible,width:"600px","append-to-body":""},on:{"update:visible":function(t){e.approverRoleVisible=t}}},[i("div",{staticClass:"person_body clear"},[i("div",{staticClass:"person_tree l"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.approverRoleSearchName,expression:"approverRoleSearchName"}],attrs:{type:"text",placeholder:"搜索角色"},domProps:{value:e.approverRoleSearchName},on:{input:[function(t){t.target.composing||(e.approverRoleSearchName=t.target.value)},function(t){return e.getDebounceData(t,2)}]}}),i("ul",e._l(e.roles,(function(t,n){return i("li",{key:n+"b",staticClass:"check_box not",class:e.$func.toggleClass(e.roleList,t,"roleId")&&"active",on:{click:function(o){e.roleList=[t]}}},[i("a",{attrs:{title:t.description}},[i("img",{attrs:{src:o("603e")}}),e._v(e._s(t.roleName))])])})),0)]),i("div",{staticClass:"has_selected l"},[i("p",{staticClass:"clear"},[e._v("已选（"+e._s(e.roleList.length)+"）\n                        "),i("a",{on:{click:function(t){e.roleList=[]}}},[e._v("清空")])]),i("ul",e._l(e.roleList,(function(t,n){return i("li",{key:n+"e"},[i("img",{attrs:{src:o("603e")}}),i("span",[e._v(e._s(t.roleName))]),i("img",{attrs:{src:o("677b")},on:{click:function(o){return e.$func.removeEle(e.roleList,t,"roleId")}}})])})),0)])]),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.approverRoleVisible=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:e.sureApprover}},[e._v("确 定")])],1)])],1)])},v=[],f={mixins:[a],props:["directorMaxLevel"],data:function(){return{approverConfig:{},approverVisible:!1,approverRoleVisible:!1,approverEmplyessList:[],approverSearchName:"",approverRoleSearchName:"",roleList:[]}},computed:{approverConfig1:function(){return this.$store.state.approverConfig.value}},watch:{approverConfig1:function(e){this.approverConfig=e}},methods:{changeRange:function(){this.approverConfig.nodeUserList=[]},changeType:function(e){this.approverConfig.nodeUserList=[],this.approverConfig.examineMode=1,this.approverConfig.noHanderAction=2,2==e?this.approverConfig.directorLevel=1:4==e?(this.approverConfig.selectMode=1,this.approverConfig.selectRange=1):7==e&&(this.approverConfig.examineEndDirectorLevel=1)},addApprover:function(){this.approverVisible=!0,this.approverSearchName="",this.getDepartmentList(),this.approverEmplyessList=[];for(var e=0;e<this.approverConfig.nodeUserList.length;e++){var t=this.approverConfig.nodeUserList[e],o=t.name,i=t.targetId;this.approverEmplyessList.push({employeeName:o,id:i})}},addRoleApprover:function(){this.approverRoleVisible=!0,this.approverRoleSearchName="",this.getRoleList(),this.roleList=[];for(var e=0;e<this.approverConfig.nodeUserList.length;e++){var t=this.approverConfig.nodeUserList[e],o=t.name,i=t.targetId;this.roleList.push({roleName:o,roleId:i})}},sureApprover:function(){var e=this;this.approverConfig.nodeUserList=[],1==this.approverConfig.settype||4==this.approverConfig.settype&&2==this.approverConfig.selectRange?(this.approverEmplyessList.map((function(t){e.approverConfig.nodeUserList.push({type:1,targetId:t.id,name:t.employeeName})})),this.approverVisible=!1):4==this.approverConfig.settype&&3==this.approverConfig.selectRange&&(this.roleList.map((function(t){e.approverConfig.nodeUserList.push({type:2,targetId:t.roleId,name:t.roleName})})),this.approverRoleVisible=!1)},saveApprover:function(){this.approverConfig.error=!this.$func.setApproverStr(this.approverConfig),this.$store.commit("updateApproverConfig",{value:this.approverConfig,flag:!0,id:this.$store.state.approverConfig.id}),this.$emit("update:nodeConfig",this.approverConfig),this.closeDrawer()},closeDrawer:function(){this.$store.commit("updateApprover",!1)}}},g=f,h=Object(p["a"])(g,m,v,!1,null,null,null),C=h.exports,y=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-drawer",{staticClass:"set_copyer",attrs:{"append-to-body":!0,title:"抄送人设置",visible:e.$store.state.copyerDrawer,direction:"rtl",size:"550px","before-close":e.saveCopyer},on:{"update:visible":function(t){return e.$set(e.$store.state,"copyerDrawer",t)}}},[i("div",{staticClass:"demo-drawer__content"},[i("div",{staticClass:"copyer_content drawer_content"},[i("el-button",{attrs:{type:"primary"},on:{click:e.addCopyer}},[e._v("添加成员")]),i("p",{staticClass:"selected_list"},[e._l(e.copyerConfig.nodeUserList,(function(t,n){return i("span",{key:n},[e._v(e._s(t.name)+"\n                    "),i("img",{attrs:{src:o("375f")},on:{click:function(o){return e.$func.removeEle(e.copyerConfig.nodeUserList,t,"targetId")}}})])})),e.copyerConfig.nodeUserList&&0!=e.copyerConfig.nodeUserList.length?i("a",{on:{click:function(t){e.copyerConfig.nodeUserList=[]}}},[e._v("清除")]):e._e()],2),i("el-checkbox-group",{staticClass:"clear",model:{value:e.ccSelfSelectFlag,callback:function(t){e.ccSelfSelectFlag=t},expression:"ccSelfSelectFlag"}},[i("el-checkbox",{attrs:{label:1}},[e._v("允许发起人自选抄送人")])],1)],1),i("div",{staticClass:"demo-drawer__footer clear"},[i("el-button",{attrs:{type:"primary"},on:{click:e.saveCopyer}},[e._v("确 定")]),i("el-button",{on:{click:e.closeDrawer}},[e._v("取 消")])],1),i("el-dialog",{staticClass:"promoter_person",attrs:{title:"选择成员",visible:e.copyerVisible,width:"600px","append-to-body":""},on:{"update:visible":function(t){e.copyerVisible=t}}},[i("div",{staticClass:"person_body clear"},[i("div",{staticClass:"person_tree l"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.copyerSearchName,expression:"copyerSearchName"}],attrs:{type:"text",placeholder:"搜索成员"},domProps:{value:e.copyerSearchName},on:{input:[function(t){t.target.composing||(e.copyerSearchName=t.target.value)},function(t){return e.getDebounceData(t,e.activeName)}]}}),i("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[i("el-tab-pane",{attrs:{label:"组织架构",name:"1"}}),i("el-tab-pane",{attrs:{label:"角色列表",name:"2"}})],1),1!=e.activeName||e.copyerSearchName?e._e():i("p",{staticClass:"ellipsis tree_nav"},[i("span",{staticClass:"ellipsis",on:{click:function(t){return e.getDepartmentList(0)}}},[e._v("天下")]),e._l(e.departments.titleDepartments,(function(t,o){return i("span",{key:o+"a",staticClass:"ellipsis",on:{click:function(o){return e.getDepartmentList(t.id)}}},[e._v(e._s(t.departmentName))])}))],2),1==e.activeName?i("ul",{staticStyle:{height:"360px"}},[e._l(e.departments.childDepartments,(function(t,n){return i("li",{key:n+"b",staticClass:"check_box not"},[i("a",[i("img",{attrs:{src:o("5836")}}),e._v(e._s(t.departmentName))]),i("i",{on:{click:function(o){return e.getDepartmentList(t.id)}}},[e._v("下级")])])})),e._l(e.departments.employees,(function(t,n){return i("li",{key:n+"c",staticClass:"check_box"},[i("a",{class:e.$func.toggleClass(e.copyerEmployessList,t)&&"active",attrs:{title:t.departmentNames},on:{click:function(o){return e.$func.toChecked(e.copyerEmployessList,t)}}},[i("img",{attrs:{src:o("7a89")}}),e._v(e._s(t.employeeName))])])}))],2):e._e(),2==e.activeName?i("ul",{staticStyle:{height:"360px"}},e._l(e.roles,(function(t,n){return i("li",{key:n+"c",staticClass:"check_box"},[i("a",{class:e.$func.toggleClass(e.copyerRoleList,t,"roleId")&&"active",attrs:{title:t.description},on:{click:function(o){return e.$func.toChecked(e.copyerRoleList,t,"roleId")}}},[i("img",{attrs:{src:o("603e")}}),e._v(e._s(t.roleName))])])})),0):e._e()],1),i("div",{staticClass:"has_selected l"},[i("p",{staticClass:"clear"},[e._v("已选（"+e._s(e.copyerEmployessList.length+e.copyerRoleList.length)+"）\n                        "),i("a",{on:{click:function(t){e.copyerEmployessList=[],e.copyerRoleList=[]}}},[e._v("清空")])]),i("ul",[e._l(e.copyerRoleList,(function(t,n){return i("li",{key:n+"e"},[i("img",{attrs:{src:o("603e")}}),i("span",[e._v(e._s(t.roleName))]),i("img",{attrs:{src:o("677b")},on:{click:function(o){return e.$func.removeEle(e.copyerRoleList,t,"roleId")}}})])})),e._l(e.copyerEmployessList,(function(t,n){return i("li",{key:n+"e1"},[i("img",{attrs:{src:o("7a89")}}),i("span",[e._v(e._s(t.employeeName))]),i("img",{attrs:{src:o("677b")},on:{click:function(o){return e.$func.removeEle(e.copyerEmployessList,t)}}})])}))],2)])]),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.copyerVisible=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:e.sureCopyer}},[e._v("确 定")])],1)])],1)])},_=[],L={mixins:[a],data:function(){return{copyerConfig:{},ccSelfSelectFlag:[],copyerVisible:!1,copyerSearchName:"",copyerEmployessList:[],copyerRoleList:[]}},computed:{copyerConfig1:function(){return this.$store.state.copyerConfig.value}},watch:{copyerConfig1:function(e){this.copyerConfig=e,this.ccSelfSelectFlag=0==this.copyerConfig.ccSelfSelectFlag?[]:[this.copyerConfig.ccSelfSelectFlag]}},methods:{addCopyer:function(){this.copyerSearchName="",this.copyerVisible=!0,this.activeName="1",this.getDepartmentList(),this.copyerEmployessList=[],this.copyerRoleList=[];for(var e=0;e<this.copyerConfig.nodeUserList.length;e++){var t=this.copyerConfig.nodeUserList[e],o=t.type,i=t.name,n=t.targetId;1==o?this.copyerEmployessList.push({employeeName:i,id:n}):2==o&&this.copyerRoleList.push({roleName:i,roleId:n})}},sureCopyer:function(){var e=this;this.copyerConfig.nodeUserList=[],this.copyerEmployessList.map((function(t){e.copyerConfig.nodeUserList.push({type:1,targetId:t.id,name:t.employeeName})})),this.copyerRoleList.map((function(t){e.copyerConfig.nodeUserList.push({type:2,targetId:t.roleId,name:t.roleName})})),this.copyerVisible=!1},saveCopyer:function(){this.copyerConfig.ccSelfSelectFlag=0==this.ccSelfSelectFlag.length?0:1,this.copyerConfig.error=!this.$func.copyerStr(this.copyerConfig),this.$store.commit("updateCopyerConfig",{value:this.copyerConfig,flag:!0,id:this.$store.state.copyerConfig.id}),this.closeDrawer()},closeDrawer:function(){this.$store.commit("updateCopyer",!1)}}},b=L,A=Object(p["a"])(b,y,_,!1,null,null,null),k=A.exports,w=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-drawer",{staticClass:"condition_copyer",attrs:{"append-to-body":!0,title:"条件设置",visible:e.$store.state.conditionDrawer,direction:"rtl",size:"550px","before-close":e.saveCondition},on:{"update:visible":function(t){return e.$set(e.$store.state,"conditionDrawer",t)}}},[i("select",{directives:[{name:"model",rawName:"v-model",value:e.conditionConfig.priorityLevel,expression:"conditionConfig.priorityLevel"}],staticClass:"priority_level",on:{change:function(t){var o=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.conditionConfig,"priorityLevel",t.target.multiple?o:o[0])}}},e._l(e.conditionsConfig.conditionNodes.length,(function(t){return i("option",{key:t,domProps:{value:t}},[e._v("优先级"+e._s(t))])})),0),i("div",{staticClass:"demo-drawer__content"},[i("div",{staticClass:"condition_content drawer_content"},[i("p",{staticClass:"tip"},[e._v("当审批单同时满足以下条件时进入此流程")]),i("ul",e._l(e.conditionConfig.conditionList,(function(t,n){return i("li",{key:n},[i("span",{staticClass:"ellipsis"},[e._v(e._s(1==t.type?"发起人":t.showName)+"：")]),1==t.type?i("div",[i("p",{class:e.conditionConfig.nodeUserList.length>0?"selected_list":"",staticStyle:{cursor:"text"},on:{click:function(t){return t.target!==t.currentTarget?null:e.addConditionRole(t)}}},[e._l(e.conditionConfig.nodeUserList,(function(t,n){return i("span",{key:n},[e._v("\n                                "+e._s(t.name)),i("img",{attrs:{src:o("375f")},on:{click:function(o){return e.$func.removeEle(e.conditionConfig.nodeUserList,t,"targetId")}}})])})),0==e.conditionConfig.nodeUserList.length?i("input",{attrs:{type:"text",placeholder:"请选择具体人员/角色/部门"},on:{click:e.addConditionRole}}):e._e()],2)]):"String"==t.columnType&&3==t.showType?i("div",[i("p",{staticClass:"check_box"},e._l(JSON.parse(t.fixedDownBoxValue),(function(o,n){return i("a",{key:n,class:e.$func.toggleStrClass(t,o.key)&&"active",on:{click:function(i){return e.toStrChecked(t,o.key)}}},[e._v(e._s(o.value))])})),0)]):i("div",[i("p",[i("select",{directives:[{name:"model",rawName:"v-model",value:t.optType,expression:"item.optType"}],style:"width:"+(6==t.optType?370:100)+"px",on:{change:[function(o){var i=Array.prototype.filter.call(o.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(t,"optType",o.target.multiple?i:i[0])},function(o){return e.changeOptType(t)}]}},[i("option",{attrs:{value:"1"}},[e._v("小于")]),i("option",{attrs:{value:"2"}},[e._v("大于")]),i("option",{attrs:{value:"3"}},[e._v("小于等于")]),i("option",{attrs:{value:"4"}},[e._v("等于")]),i("option",{attrs:{value:"5"}},[e._v("大于等于")]),i("option",{attrs:{value:"6"}},[e._v("介于两个数之间")])]),6!=t.optType?i("input",{directives:[{name:"enter-number",rawName:"v-enter-number",value:2,expression:"2"},{name:"model",rawName:"v-model",value:t.zdy1,expression:"item.zdy1"}],attrs:{type:"text",placeholder:"请输入"+t.showName},domProps:{value:t.zdy1},on:{input:function(o){o.target.composing||e.$set(t,"zdy1",o.target.value)}}}):e._e()]),6==t.optType?i("p",[i("input",{directives:[{name:"enter-number",rawName:"v-enter-number",value:2,expression:"2"},{name:"model",rawName:"v-model",value:t.zdy1,expression:"item.zdy1"}],staticClass:"mr_10",staticStyle:{width:"75px"},attrs:{type:"text"},domProps:{value:t.zdy1},on:{input:function(o){o.target.composing||e.$set(t,"zdy1",o.target.value)}}}),i("select",{directives:[{name:"model",rawName:"v-model",value:t.opt1,expression:"item.opt1"}],staticStyle:{width:"60px"},on:{change:function(o){var i=Array.prototype.filter.call(o.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(t,"opt1",o.target.multiple?i:i[0])}}},[i("option",{attrs:{value:"<"}},[e._v("<")]),i("option",{attrs:{value:"≤"}},[e._v("≤")])]),i("span",{staticClass:"ellipsis",staticStyle:{display:"inline-block",width:"60px","vertical-align":"text-bottom"}},[e._v(e._s(t.showName))]),i("select",{directives:[{name:"model",rawName:"v-model",value:t.opt2,expression:"item.opt2"}],staticClass:"ml_10",staticStyle:{width:"60px"},on:{change:function(o){var i=Array.prototype.filter.call(o.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(t,"opt2",o.target.multiple?i:i[0])}}},[i("option",{attrs:{value:"<"}},[e._v("<")]),i("option",{attrs:{value:"≤"}},[e._v("≤")])]),i("input",{directives:[{name:"enter-number",rawName:"v-enter-number",value:2,expression:"2"},{name:"model",rawName:"v-model",value:t.zdy2,expression:"item.zdy2"}],staticStyle:{width:"75px"},attrs:{type:"text"},domProps:{value:t.zdy2},on:{input:function(o){o.target.composing||e.$set(t,"zdy2",o.target.value)}}})]):e._e()]),1==t.type?i("a",{on:{click:function(o){e.conditionConfig.nodeUserList=[],e.$func.removeEle(e.conditionConfig.conditionList,t,"columnId")}}},[e._v("删除")]):e._e(),2==t.type?i("a",{on:{click:function(o){return e.$func.removeEle(e.conditionConfig.conditionList,t,"columnId")}}},[e._v("删除")]):e._e()])})),0),i("el-button",{attrs:{type:"primary"},on:{click:e.addCondition}},[e._v("添加条件")]),i("el-dialog",{staticClass:"condition_list",attrs:{title:"选择条件",visible:e.conditionVisible,width:"480px","append-to-body":""},on:{"update:visible":function(t){e.conditionVisible=t}}},[i("p",[e._v("请选择用来区分审批流程的条件字段")]),i("p",{staticClass:"check_box"},[i("a",{class:e.$func.toggleClass(e.conditionList,{columnId:0},"columnId")&&"active",on:{click:function(t){return e.$func.toChecked(e.conditionList,{columnId:0},"columnId")}}},[e._v("发起人")]),e._l(e.conditions,(function(t,o){return i("a",{key:o,class:e.$func.toggleClass(e.conditionList,t,"columnId")&&"active",on:{click:function(o){return e.$func.toChecked(e.conditionList,t,"columnId")}}},[e._v(e._s(t.showName))])}))],2),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.conditionVisible=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:e.sureCondition}},[e._v("确 定")])],1)])],1),i("el-dialog",{staticClass:"promoter_person",attrs:{title:"选择成员",visible:e.conditionRoleVisible,width:"600px","append-to-body":""},on:{"update:visible":function(t){e.conditionRoleVisible=t}}},[i("div",{staticClass:"person_body clear"},[i("div",{staticClass:"person_tree l"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.conditionRoleSearchName,expression:"conditionRoleSearchName"}],attrs:{type:"text",placeholder:"搜索成员"},domProps:{value:e.conditionRoleSearchName},on:{input:[function(t){t.target.composing||(e.conditionRoleSearchName=t.target.value)},function(t){return e.getDebounceData(t,e.activeName)}]}}),i("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[i("el-tab-pane",{attrs:{label:"组织架构",name:"1"}}),i("el-tab-pane",{attrs:{label:"角色列表",name:"2"}})],1),1!=e.activeName||e.conditionRoleSearchName?e._e():i("p",{staticClass:"ellipsis tree_nav"},[i("span",{staticClass:"ellipsis",on:{click:function(t){return e.getDepartmentList(0)}}},[e._v("天下")]),e._l(e.departments.titleDepartments,(function(t,o){return i("span",{key:o+"a",staticClass:"ellipsis",on:{click:function(o){return e.getDepartmentList(t.id)}}},[e._v(e._s(t.departmentName))])}))],2),1==e.activeName?i("ul",{staticStyle:{height:"360px"}},[e._l(e.departments.childDepartments,(function(t,n){return i("li",{key:n+"b",staticClass:"check_box"},[i("a",{class:e.$func.toggleClass(e.conditionDepartmentList,t)&&"active",on:{click:function(o){return e.$func.toChecked(e.conditionDepartmentList,t)}}},[i("img",{attrs:{src:o("5836")}}),e._v(e._s(t.departmentName))]),i("i",{on:{click:function(o){return e.getDepartmentList(t.id)}}},[e._v("下级")])])})),e._l(e.departments.employees,(function(t,n){return i("li",{key:n+"c",staticClass:"check_box"},[i("a",{class:e.$func.toggleClass(e.conditionEmployessList,t)&&"active",attrs:{title:t.departmentNames},on:{click:function(o){return e.$func.toChecked(e.conditionEmployessList,t)}}},[i("img",{attrs:{src:o("7a89")}}),e._v(e._s(t.employeeName))])])}))],2):e._e(),2==e.activeName?i("ul",{staticStyle:{height:"360px"}},e._l(e.roles,(function(t,n){return i("li",{key:n+"c",staticClass:"check_box"},[i("a",{class:e.$func.toggleClass(e.conditionRoleList,t,"roleId")&&"active",attrs:{title:t.description},on:{click:function(o){return e.$func.toChecked(e.conditionRoleList,t,"roleId")}}},[i("img",{attrs:{src:o("603e")}}),e._v(e._s(t.roleName))])])})),0):e._e()],1),i("div",{staticClass:"has_selected l"},[i("p",{staticClass:"clear"},[e._v("已选（"+e._s(e.conditionDepartmentList.length+e.conditionEmployessList.length+e.conditionRoleList.length)+"）\n                        "),i("a",{on:{click:function(t){e.conditionDepartmentList=[],e.conditionEmployessList=[],e.conditionRoleList=[]}}},[e._v("清空")])]),i("ul",[e._l(e.conditionRoleList,(function(t,n){return i("li",{key:n+"e"},[i("img",{attrs:{src:o("603e")}}),i("span",[e._v(e._s(t.roleName))]),i("img",{attrs:{src:o("677b")},on:{click:function(o){return e.$func.removeEle(e.conditionRoleList,t,"roleId")}}})])})),e._l(e.conditionDepartmentList,(function(t,n){return i("li",{key:n+"e1"},[i("img",{attrs:{src:o("5836")}}),i("span",[e._v(e._s(t.departmentName))]),i("img",{attrs:{src:o("677b")},on:{click:function(o){return e.$func.removeEle(e.conditionDepartmentList,t)}}})])})),e._l(e.conditionEmployessList,(function(t,n){return i("li",{key:n+"e2"},[i("img",{attrs:{src:o("7a89")}}),i("span",[e._v(e._s(t.employeeName))]),i("img",{attrs:{src:o("677b")},on:{click:function(o){return e.$func.removeEle(e.conditionEmployessList,t)}}})])}))],2)])]),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.conditionRoleVisible=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:e.sureConditionRole}},[e._v("确 定")])],1)]),i("div",{staticClass:"demo-drawer__footer clear"},[i("el-button",{attrs:{type:"primary"},on:{click:e.saveCondition}},[e._v("确 定")]),i("el-button",{on:{click:function(t){return e.$store.commit("updateCondition",!1)}}},[e._v("取 消")])],1)],1)])},N=[],x=(o("55dd"),o("6b54"),o("28a5"),{mixins:[a],data:function(){return{conditionVisible:!1,conditionsConfig:{conditionNodes:[]},conditionConfig:{},PriorityLevel:"",conditionRoleSearchName:"",conditionDepartmentList:[],conditionEmployessList:[],conditionRoleList:[],conditions:[],conditionList:[],conditionRoleVisible:!1}},computed:{conditionsConfig1:function(){return this.$store.state.conditionsConfig}},watch:{conditionsConfig1:function(e){this.conditionsConfig=e.value,this.PriorityLevel=e.priorityLevel,this.conditionConfig=e.priorityLevel?this.conditionsConfig.conditionNodes[e.priorityLevel-1]:{nodeUserList:[],conditionList:[]}}},methods:{changeOptType:function(e){1==e.optType?e.zdy1=2:(e.zdy1=1,e.zdy2=2)},toStrChecked:function(e,t){var o=e.zdy1?e.zdy1.split(","):[],i=this.$func.toggleStrClass(e,t);i?this.removeStrEle(e,t):(o.push(t),e.zdy1=o.toString())},removeStrEle:function(e,t){var o,i=e.zdy1?e.zdy1.split(","):[];i.map((function(e,i){e==t&&(o=i)})),i.splice(o,1),e.zdy1=i.toString()},addCondition:function(){var e=this;this.conditionList=[],this.conditionVisible=!0,this.$axios.get("".concat("/Workflow/","conditions.json?tableId=").concat(this.tableId)).then((function(t){if(e.conditions=t.data,e.conditionConfig.conditionList)for(var o=0;o<e.conditionConfig.conditionList.length;o++){var i=e.conditionConfig.conditionList[o].columnId;0==i?e.conditionList.push({columnId:0}):e.conditionList.push(e.conditions.filter((function(e){return e.columnId==i}))[0])}}))},sureCondition:function(){for(var e=0;e<this.conditionList.length;e++){var t=this.conditionList[e],o=t.columnId,i=t.showName,n=t.columnName,s=t.showType,r=t.columnType,a=t.fixedDownBoxValue;this.$func.toggleClass(this.conditionConfig.conditionList,this.conditionList[e],"columnId")||(0==o?(this.conditionConfig.nodeUserList,this.conditionConfig.conditionList.push({type:1,columnId:o,showName:"发起人"})):"Double"==r?this.conditionConfig.conditionList.push({showType:s,columnId:o,type:2,showName:i,optType:"1",zdy1:"2",opt1:"<",zdy2:"",opt2:"<",columnDbname:n,columnType:r}):"String"==r&&"3"==s&&this.conditionConfig.conditionList.push({showType:s,columnId:o,type:2,showName:i,zdy1:"",columnDbname:n,columnType:r,fixedDownBoxValue:a}))}for(var c=this.conditionConfig.conditionList.length-1;c>=0;c--)this.$func.toggleClass(this.conditionList,this.conditionConfig.conditionList[c],"columnId")||this.conditionConfig.conditionList.splice(c,1);this.conditionConfig.conditionList.sort((function(e,t){return e.columnId-t.columnId})),this.conditionVisible=!1},saveCondition:function(){this.$store.commit("updateCondition",!1);var e=this.conditionsConfig.conditionNodes.splice(this.PriorityLevel-1,1);this.conditionsConfig.conditionNodes.splice(this.conditionConfig.priorityLevel-1,0,e[0]),this.conditionsConfig.conditionNodes.map((function(e,t){e.priorityLevel=t+1}));for(var t=0;t<this.conditionsConfig.conditionNodes.length;t++)this.conditionsConfig.conditionNodes[t].error="请设置条件"==this.$func.conditionStr(this.conditionsConfig,t)&&t!=this.conditionsConfig.conditionNodes.length-1;this.$store.commit("updateConditionsConfig",{value:this.conditionsConfig,flag:!0,id:this.$store.state.conditionsConfig.id})},addConditionRole:function(){this.conditionRoleSearchName="",this.conditionRoleVisible=!0,this.activeName="1",this.getDepartmentList(),this.conditionDepartmentList=[],this.conditionEmployessList=[],this.conditionRoleList=[];for(var e=0;e<this.conditionConfig.nodeUserList.length;e++){var t=this.conditionConfig.nodeUserList[e],o=t.type,i=t.name,n=t.targetId;1==o?this.conditionEmployessList.push({employeeName:i,id:n}):2==o?this.conditionRoleList.push({roleName:i,roleId:n}):3==o&&this.conditionDepartmentList.push({departmentName:i,id:n})}},sureConditionRole:function(){var e=this;this.conditionConfig.nodeUserList=[],this.conditionRoleList.map((function(t){e.conditionConfig.nodeUserList.push({type:2,targetId:t.roleId,name:t.roleName})})),this.conditionDepartmentList.map((function(t){e.conditionConfig.nodeUserList.push({type:3,targetId:t.id,name:t.departmentName})})),this.conditionEmployessList.map((function(t){e.conditionConfig.nodeUserList.push({type:1,targetId:t.id,name:t.employeeName})})),this.conditionRoleVisible=!1}}}),E=x,S=Object(p["a"])(E,w,N,!1,null,null,null),D=S.exports,R={components:{promoterDrawer:u,approverDrawer:C,copyerDrawer:k,conditionDrawer:D},data:function(){return{isTried:!1,tipList:[],tipVisible:!1,nowVal:100,processConfig:{},nodeConfig:{},workFlowDef:{},flowPermission:[],directorMaxLevel:0,tableId:""}},created:function(){var e=this;this.$axios.get("".concat("/Workflow/","data.json"),{workFlowDefId:this.$route.params.workFlowDefId}).then((function(t){e.processConfig=t.data,e.nodeConfig=e.processConfig.nodeConfig,e.flowPermission=e.processConfig.flowPermission,e.directorMaxLevel=e.processConfig.directorMaxLevel,e.workFlowDef=e.processConfig.workFlowDef,e.tableId=e.processConfig.tableId}))},methods:{toReturn:function(){},reErr:function(e){if(e.childNode){if(1==e.childNode.type)e.childNode.error&&this.tipList.push({name:e.childNode.nodeName,type:"审核人"}),this.reErr(e.childNode);else if(2==e.childNode.type)e.childNode.error&&this.tipList.push({name:e.childNode.nodeName,type:"抄送人"}),this.reErr(e.childNode);else if(3==e.childNode.type)this.reErr(e.childNode.childNode);else if(4==e.childNode.type){this.reErr(e.childNode);for(var t=0;t<e.childNode.conditionNodes.length;t++)e.childNode.conditionNodes[t].error&&this.tipList.push({name:e.childNode.conditionNodes[t].nodeName,type:"条件"}),this.reErr(e.childNode.conditionNodes[t])}}else e.childNode=null},saveSet:function(){this.isTried=!0,this.tipList=[],this.reErr(this.nodeConfig),0==this.tipList.length?this.processConfig.flowPermission=this.flowPermission:this.tipVisible=!0},zoomSize:function(e){if(1==e){if(50==this.nowVal)return;this.nowVal-=10}else{if(300==this.nowVal)return;this.nowVal+=10}}}},I=R,P=(o("b584"),Object(p["a"])(I,i,n,!1,null,null,null));t["default"]=P.exports},b584:function(e,t,o){"use strict";o("e1f4")},e1f4:function(e,t,o){}}]);